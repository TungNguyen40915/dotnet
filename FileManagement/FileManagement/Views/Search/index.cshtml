@{
    ViewBag.Title = "Search File";
}

<link href="~/css/style.css" rel="stylesheet" />
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- container -->
<div class="container">
    <div class="gpp20-section">
        <!--Start Form Search-->
        <form asp-controller="Search" asp-action="Search" method="get" enctype="multipart/form-data" id="searchViewModel">
            <div asp-validation-summary="All" class="text-danger"></div>
            <div class="gpp20-inputgroup">
                <p class="input-label">File Name</p>
                <input name="fileName" id="fileName" value="@ViewBag.fileName" onchange="checkAllEmpty()" class="gpp20-search-form gpp_w66p" placeholder="Enter file name ..." aria-label="Enter file name ...">
            </div>
            <div class="gpp20-inputgroup gpp20-datepicker">
                <p class="input-label">Upload Date</p>
                <div class="datepicker gpp_w66p">
                    <input id="uploadDateFrom" name="uploadDateFrom" onchange="checkAllEmpty()" value="@ViewBag.uploadDateFrom" type="text" aria-label="From"><span>～</span>
                    <input id="uploadDateTo" name="uploadDateTo" onchange="checkAllEmpty()" value="@ViewBag.uploadDateTo" type="text" aria-label="To">
                </div>
            </div>

            <div class="gpp_tac gpp_mt-24">
                <a disable class="gpp_button gpp_btn-secondry icon-ico_search disabled" onclick="submitForm()" id="btnSearch" href="javascript:void(0);">Search</a>
            </div>
        </form>
        <!--End Form Search-->

        <div class="gpp20-searchresult-utility gpp_mt-32">
            <div class="records">
                <p> <span>@ViewBag.totalRecords</span> records found</p>
            </div>
        </div>


        <table class="table_data gpp20_searchresult-table gpp_mb-32">
            <thead>
                <tr>
                    <th>File Name</th>
                    <th class="result-filesize">File Size</th>
                    <th class="result-day">Uploaded Date</th>
                </tr>
            </thead>
            <tbody id="pagination">

                @if (ViewBag.files.Count > 0)
                {
                    @foreach (var item in ViewBag.files)
                    {
                        <tr class="row-item">
                            <td>
                                <p class="result-filename"><a class="result-filelink" value="@item.FileName" href="/Download/index?ffid=@item.GUID">@item.FileName</a></p>
                                <p class="result-filepass">
                                    <script language="javascript">
                                            document.write(window.location.origin+"/Download/index?ffid=@item.GUID");
                                    </script>
                                </p>
                            </td>
                            @if (item.FileSize >= 1048576)
                            {
                                <td class="result-filesize">@((item.FileSize / 1048576).ToString("0.00"))MB</td>
                            }
                            else if (item.FileSize >= 1024)
                            {
                                <td class="result-filesize">@((item.FileSize / 1024).ToString("0.00"))KB</td>
                            }
                            else
                            {
                                <td class="result-filesize">@((item.FileSize).ToString("0.00"))B</td>
                            }

                            <td class="result-day">@Convert.ToDateTime(item.UploadedDate).ToString("yyyy/MM/dd HH:mm")</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td>
                            No file found.
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="form-modal-message">
    <div class="vertical-alignment-helper">
        <div class="modal-dialog vertical-align-center">
            <div class="modal-content">
                <div style="text-align: center" class="modal-header">
                    <h5 class="modal-title">Error</h5>
                </div>
                <div style="text-align: center" class="modal-body">

                </div>
                <div style="text-align: right" class="modal-footer">
                    <button type="button" class="close-button" onclick="resetModal()">Close </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="gpp_mt-32">
    <a class="result-filelink" value="View All Files" href="/home">Back</a>
</div>






<script src="~/lib/jquery/dist/jquery-3.5.1.min.js"></script>
<script src="~/lib/jquery/dist/jquery-ui.js"></script>
<script src="~/lib/jquery/dist/script.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
<script src="~/js/search.js"></script>
<script src="~/js/paging.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
<script src="~/lib/jquery/dist/pagination.js"></script>

